<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noindex, nofollow">
  <title>Portfolio</title>
  <link rel="stylesheet" href="./style/index.css">
</head>
<body class="landing-page">
  <header>
    <nav>
      <div class="logo">feda fitian</div>
      <input type="checkbox" id="menu-toggle" class="menu-toggle" />
      <label for="menu-toggle" class="hamburger">
        <span></span>
        <span></span>
        <span></span>
      </label>
      <ul class="nav-left">
        <li><a href="./index.html">work</a></li>
        <li><a href="./about.html">about</a></li>
        <li><a href="./resume.html">resume & contact</a></li>
        <li><a href="https://www.linkedin.com/in/fedafitian/">linkedin</a></li>
        </ul>
        <div class="logo">feda fitian</div>
        <ul class="nav-right">
          <li><a href="https://www.linkedin.com/in/fedafitian/"><img src="img/icons/linkedin.png" alt="LinkedIn"></a></li>
        </ul>
    </nav>
  </header>
  

  <section id="hero">
    <div class="hero-content">
      <div class="typewriter">
        <h1>Hi! I’m Feda.</h1>
      </div>
        <h2>I’m a cat lover professional based out of Seattle.</h2>
      <p>Scroll down to see my work!</p>
    </div>
  </section>

  <section id="portfolio">
    <div class="grid">
      <div class="grid-item">
        <a href="innovation.html"><img src="img/greenhouse/innovation-hero.jpg" alt="Innovation Program">
        <div class="overlay">Innovation Programs</div></a>
      </div>
      <div class="grid-item">
        <a href="ai-program-and-products.html"><img src="img/ai/ai-hero.jpg" alt="Project 2">
        <div class="overlay">AI Program and Products</div></a>
      </div>

      <div class="grid-item">
        <a href="customer-programs.html"><img src="img/gifs/customer.gif" alt="Project 4">
        <div class="overlay">Customer Programs</div>
      </div></a>
      <div class="grid-item">
        <a href="product-delivery.html"><img src="img/gifs/product-delivery.gif" alt="Project 5">
        <div class="overlay">Product Delivery </div></a>
      </div>
      <div class="grid-item">
        <a href="software-engineering.html"><img src="img/gifs/animated-code.gif" alt="Project 6">
        <div class="overlay">Software Engineering</div></a>
      </div>
      <div class="grid-item">
        <a href="executive-operations-and-strategy.html"><img src="img/gifs/strategy.gif" alt="Executive Operations and Strategy">
        <div class="overlay">Executive Operations and Strategy</div></a>
      </div>
      <div class="grid-item">
        <a href="curriculum-development.html"><img src="img/gifs/education.gif" alt="Project 7">
        <div class="overlay">Curriculum Development</div>
      </div></a>
      <div class="grid-item">
        <a href="building-community-and-inclusion.html"><img src="img/gifs/diversity-and-community.png" alt="Project 8">
        <div class="overlay">Building Community and Inclusion</div>
      </div></a>
    </div>
  </section>

  <script>
    const gridItems = Array.from(document.querySelectorAll(".grid-item"));
    const viewportHeight = window.innerHeight;
  
    // Helper: Group items into rows (2 items per row)
    function groupItemsIntoRows(items, itemsPerRow = 2) {
      const rows = [];
      for (let i = 0; i < items.length; i += itemsPerRow) {
        rows.push(items.slice(i, i + itemsPerRow));
      }
      return rows;
    }
  
    // Apply overlay logic on scroll
    function applyOverlayLogic() {
      const viewportWidth = window.innerWidth;
  
      // Exclude logic for window sizes greater than 1024px
      if (viewportWidth > 1024) {
        gridItems.forEach((item) => {
          item.classList.remove("scrolled-past", "scrolled-fade");
        });
        return;
      }
  
      // Logic for window sizes greater than 768px and less than or equal to 1024px
      if (viewportWidth > 768 && viewportWidth <= 1024) {
        const rows = groupItemsIntoRows(gridItems, 2);
        let mostRelevantRow = null;
        let maxVisiblePercentage = 0;
  
        rows.forEach((row) => {
          const visiblePercentages = row.map((item) => {
            const rect = item.getBoundingClientRect();
            const visibleHeight = Math.min(rect.bottom, viewportHeight) - Math.max(rect.top, 0);
            return (visibleHeight / rect.height) * 100; // Percentage visibility
          });
  
          const rowAverageVisibility = visiblePercentages.reduce((a, b) => a + b, 0) / row.length;
  
          if (rowAverageVisibility > maxVisiblePercentage) {
            maxVisiblePercentage = rowAverageVisibility;
            mostRelevantRow = row;
          }
        });
  
        // Check for fallback at the bottom of the page
        const scrollPosition = window.scrollY || document.documentElement.scrollTop;
        const isAtPageEnd =
          Math.ceil(scrollPosition + viewportHeight) >= document.documentElement.scrollHeight;
  
        if (isAtPageEnd) {
          const lastRow = rows[rows.length - 1];
          const lastRowVisiblePercentages = lastRow.map((item) => {
            const rect = item.getBoundingClientRect();
            const visibleHeight = Math.min(rect.bottom, viewportHeight) - Math.max(rect.top, 0);
            return (visibleHeight / rect.height) * 100; // Percentage visibility
          });
  
          // If the last row is less than 20% visible, switch to the second-to-last row
          if (Math.min(...lastRowVisiblePercentages) < 30 && rows.length > 1) {
            mostRelevantRow = rows[rows.length - 2]; // Switch to second-to-last row
          } else {
            mostRelevantRow = lastRow; // Otherwise, highlight the last row
          }
        }
  
        // Reset all overlays
        gridItems.forEach((item) => {
          item.classList.remove("scrolled-past", "scrolled-fade");
        });
  
        // Apply overlay effect to the most relevant row
        if (mostRelevantRow) {
          mostRelevantRow.forEach((item) => item.classList.add("scrolled-past"));
        }
  
        return; // Skip the logic for smaller screens
      }
  
      // Logic for smaller screens (<= 768px)
      let mostRelevantItem = null;
      let minDistanceToScroll = Infinity;
  
      gridItems.forEach((item) => {
        const rect = item.getBoundingClientRect();
        const visibleHeight = Math.min(rect.bottom, viewportHeight) - Math.max(rect.top, 0);
        const visibilityPercentage = visibleHeight / rect.height;
  
        // Check if the item is visible
        if (visibilityPercentage > 0.5) {
          const distanceToCenter = Math.abs(rect.top + rect.height / 2 - viewportHeight / 2);
  
          // Find the closest item to the center of the viewport
          if (distanceToCenter < minDistanceToScroll) {
            mostRelevantItem = item;
            minDistanceToScroll = distanceToCenter;
          }
        }
      });
  
      // Reset all overlays
      gridItems.forEach((item) => {
        item.classList.remove("scrolled-past", "scrolled-fade");
      });
  
      // Apply overlay effect to the most relevant item
      if (mostRelevantItem) {
        mostRelevantItem.classList.add("scrolled-past");
      }
    }
  
    // Handle hover logic
    gridItems.forEach((item) => {
      item.addEventListener("mouseover", () => {
        if (window.innerWidth > 1024) return; // Exclude hover logic for larger screens
  
        gridItems.forEach((otherItem) => {
          if (otherItem !== item) {
            otherItem.classList.remove("scrolled-past");
            otherItem.classList.add("scrolled-fade");
          }
        });
  
        item.classList.add("scrolled-past");
        item.classList.remove("scrolled-fade");
      });
  
      item.addEventListener("mouseout", () => {
        if (window.innerWidth > 1024) return; // Exclude hover logic for larger screens
        applyOverlayLogic(); // Reapply default logic after hover stops
      });
    });
  
    // Apply logic on scroll
    window.addEventListener("scroll", applyOverlayLogic);
  
    // Initial logic on page load
    document.addEventListener("DOMContentLoaded", () => {
      gridItems.forEach((item) => {
        item.classList.remove("scrolled-past", "scrolled-fade");
      });
      applyOverlayLogic();
    });
  
    // Reapply logic on resize
    window.addEventListener("resize", applyOverlayLogic);
  </script>
  
  
  
</body>
</html>
